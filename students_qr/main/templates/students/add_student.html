<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'students/css/style.css' %}">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <h1>{% block header_title %}–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏{% endblock %}</h1>
            
            <div class="auth-info">
                {% if user.is_authenticated %}
                    <span class="user-greeting">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {{ user.username }}!</span>
                    <form method="post" action="{% url 'students:logout' %}" style="display: inline;">
                        {% csrf_token %}
                        <button type="submit" class="btn-logout">–í—ã–π—Ç–∏</button>
                    </form>
                {% else %}
                    <a href="{% url 'students:login' %}" class="btn-login">–í–æ–π—Ç–∏</a>
                {% endif %}
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="back-button">
            <a href="{% url 'students:student_list' %}" class="btn btn-secondary">‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</a>
        </div>

        <div class="form-container">
            <h2 class="section-title">–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–∞</h2>
            
            <form method="post" enctype="multipart/form-data" class="student-form">
                {% csrf_token %}
                
                <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                <div class="form-section">
                    <h3>–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="{{ form.full_name_english.id_for_label }}">–§–ò–û –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º *</label>
                            {{ form.full_name_english }}
                            {% if form.full_name_english.errors %}
                            <div class="error-text">{{ form.full_name_english.errors }}</div>
                            {% endif %}
                        </div>
                        
                        <div class="form-group">
                            <label for="{{ form.full_name_arabic.id_for_label }}">–§–ò–û –Ω–∞ –∞—Ä–∞–±—Å–∫–æ–º *</label>
                            {{ form.full_name_arabic }}
                            {% if form.full_name_arabic.errors %}
                            <div class="error-text">{{ form.full_name_arabic.errors }}</div>
                            {% endif %}
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="{{ form.passport_number.id_for_label }}">–ù–æ–º–µ—Ä –ø–∞—Å–ø–æ—Ä—Ç–∞ *</label>
                            {{ form.passport_number }}
                            {% if form.passport_number.errors %}
                            <div class="error-text">{{ form.passport_number.errors }}</div>
                            {% endif %}
                        </div>
                        
                        <div class="form-group">
                            <label for="{{ form.birth_date.id_for_label }}">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è *</label>
                            {{ form.birth_date }}
                            {% if form.birth_date.errors %}
                            <div class="error-text">{{ form.birth_date.errors }}</div>
                            {% endif %}
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="{{ form.gender.id_for_label }}">–ü–æ–ª *</label>
                            {{ form.gender }}
                        </div>
                        
                        <div class="form-group">
                            <label for="{{ form.citizenship.id_for_label }}">–ì—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ *</label>
                            {{ form.citizenship }}
                        </div>
                        
                        <div class="form-group">
                            <label for="{{ form.country_of_residence.id_for_label }}">–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è *</label>
                            {{ form.country_of_residence }}
                        </div>
                    </div>
                </div>

                <!-- –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                <div class="form-section">
                    <h3>–û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="{{ form.major.id_for_label }}">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ / —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å *</label>
                            {{ form.major }}
                        </div>
                        
                        <div class="form-group">
                            <label for="{{ form.study_duration.id_for_label }}">–°—Ä–æ–∫ –æ–±—É—á–µ–Ω–∏—è (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–µ—Ç) *</label>
                            {{ form.study_duration }}
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="{{ form.current_status.id_for_label }}">–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Å—Ç—É–¥–µ–Ω—Ç–∞ *</label>
                            {{ form.current_status }}
                        </div>
                        
                        <div class="form-group">
                            <label for="{{ form.start_date.id_for_label }}">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –æ–±—É—á–µ–Ω–∏—è *</label>
                            {{ form.start_date }}
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="{{ form.expected_end_date.id_for_label }}">–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º–∞—è –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è</label>
                            {{ form.expected_end_date }}
                        </div>
                        
                        <div class="form-group">
                            <label for="{{ form.actual_end_date.id_for_label }}">–§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è</label>
                            {{ form.actual_end_date }}
                        </div>
                    </div>
                </div>

                <!-- –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ -->
                <div class="form-section">
                    <h3>–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="{{ form.phone_number.id_for_label }}">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ *</label>
                            {{ form.phone_number }}
                            {% if form.phone_number.errors %}
                            <div class="error-text">{{ form.phone_number.errors }}</div>
                            {% endif %}
                        </div>
                        
                        <div class="form-group">
                            <label for="{{ form.email.id_for_label }}">–ê–¥—Ä–µ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã *</label>
                            {{ form.email }}
                            {% if form.email.errors %}
                            <div class="error-text">{{ form.email.errors }}</div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- –î–æ–∫—É–º–µ–Ω—Ç—ã -->
                <div class="form-section">
                    <h3>–î–æ–∫—É–º–µ–Ω—Ç—ã</h3>
                    
                    <div class="form-group">
                        <label for="{{ form.passport_scan.id_for_label }}">–°–∫–∞–Ω –ø–∞—Å–ø–æ—Ä—Ç–∞ *</label>
                        {{ form.passport_scan }}
                        <small class="file-help">–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: PDF, JPG, JPEG, PNG</small>
                        {% if form.passport_scan.errors %}
                        <div class="error-text">{{ form.passport_scan.errors }}</div>
                        {% endif %}
                    </div>
                </div>

                <!-- –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—ã -->
                <div class="form-section">
                    <h3>–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—ã –æ–±—É—á–µ–Ω–∏—è</h3>
                    <p class="form-help-text">–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–æ–≤</p>
                    
                    {{ university_formset.management_form }}
                    
                    <div id="universities-container">
                        {% for form in university_formset %}
                        <div class="university-form">
                            <h4>–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç {{ forloop.counter }}</h4>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="{{ form.university.id_for_label }}">–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç *</label>
                                    {{ form.university }}
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="{{ form.start_date.id_for_label }}">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –æ–±—É—á–µ–Ω–∏—è *</label>
                                    {{ form.start_date }}
                                </div>
                                
                                <div class="form-group">
                                    <label for="{{ form.end_date.id_for_label }}">–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –æ–±—É—á–µ–Ω–∏—è</label>
                                    {{ form.end_date }}
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="checkbox-label">
                                    {{ form.is_current }}
                                    <span>–¢–µ–∫—É—â–∏–π —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç</span>
                                </label>
                            </div>
                            
                            {% if university_formset.can_delete %}
                            <div class="form-group">
                                <label class="checkbox-label">
                                    {{ form.DELETE }}
                                    <span>–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç</span>
                                </label>
                            </div>
                            {% endif %}
                            
                            {{ form.id }}
                        </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- –ö–Ω–æ–ø–∫–∏ —Ñ–æ—Ä–º—ã -->
                <div class="form-actions">
                    <button type="submit" class="btn btn-success btn-large">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞</button>
                    <a href="{% url 'students:student_list' %}" class="btn btn-secondary">–û—Ç–º–µ–Ω–∞</a>
                </div>
            </form>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="organization-info">
                <h3>1</h3>
                <p>–ê–¥—Ä–µ—Å: –≥. –ú–æ—Å–∫–≤–∞, —É–ª. –°—Ç—É–¥–µ–Ω—á–µ—Å–∫–∞—è, –¥. 15</p>
                <p>–¢–µ–ª–µ—Ñ–æ–Ω: +7 (495) 123-45-67</p>
                <p>Email: info@edu-center.ru</p>
                <p>&copy; 2025 –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã</p>
            </div>
        </div>
    </footer>
</body>
</html>